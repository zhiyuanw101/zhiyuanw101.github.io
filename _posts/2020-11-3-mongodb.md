---
layout: post
title: mongoDB
categories: [DB, SQL]
description: mongoDB
keywords: DB
---
## Document

## Field

## [Expression](https://docs.mongodb.com/manual/meta/aggregation-quick-reference/#aggregation-expressions)

- Meaning: result of calculation from some fields
- **Field path**: `$user`, `$user.name`
- **Expression objects**: 
  - `{ <field1>: <expression1>, ... }`

- [**Operator expressions**](https://docs.mongodb.com/manual/meta/aggregation-quick-reference/#agg-quick-ref-operator-expressions):
  - `{ <operator>: [ <argument1>, <argument2> ... ] }`

## Aggregation

### [$group](https://docs.mongodb.com/manual/reference/operator/aggregation/group/)

``` mongodb
{
  $group:
    {
      _id: <expression>, // Group By Expression
      <field1>: { <accumulator1> : <expression1> },
      ...
    }
 }
```

- _id: group by **expression**, similar to GROUP BY in SQL
- field1: optional, **accumulator** **operators** + **expression**
- **accumulator operators**:
  - `$push`: push expression to this fields' array
  - `$max/ min`: max/ min expression value for each group
  - `$sum`: sum of expression
  - `$first/ last`: first/ last expression in the group

- `$match` in next stage for HAVING